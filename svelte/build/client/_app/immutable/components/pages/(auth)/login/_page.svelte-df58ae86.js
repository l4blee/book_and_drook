import{S as H,i as Q,s as W,a as x,k as g,w as q,q as F,I as X,h as i,c as k,l as b,m as $,x as J,r as S,n as d,b as P,G as l,y as V,J as Y,K as ee,f as Z,t as G,z as K,u as te,L as se}from"../../../../chunks/index-29f9af01.js";import{L as R}from"../../../../chunks/LoginInput-71842399.js";function U(o){let u,a;return{c(){u=g("span"),a=F(o[2]),this.h()},l(t){u=b(t,"SPAN",{class:!0});var e=$(u);a=S(e,o[2]),e.forEach(i),this.h()},h(){d(u,"class","text-red-500 text-xl text-center mt-16")},m(t,e){P(t,u,e),l(u,a)},p(t,e){e&4&&te(a,t[2])},d(t){t&&i(u)}}}function ae(o){let u,a,t,e,f,E,m,p,v,r,A,B,D,h,O,_,I,y,M,T;f=new R({props:{label:"Никнейм",type:"text",id:"nickname",pattern:"^[^0-9][a-zA-Z0-9]{4,}$",errorMsg:"Никнейм должен содержать не менее 5 латинских букв и цифр"}}),m=new R({props:{label:"Пароль",type:"password",id:"password",pattern:"^(?=.*[0-9])(?=.*[!_@#$%^&*])[a-zA-Z0-9!_@#$%^&*]{6,16}$",errorMsg:"Пароль должен быть не короче 6 символов и состоять из латинского алфавита, цирф и спецсимволов"}});let n=o[1]&&U(o);return{c(){u=x(),a=g("div"),t=g("div"),e=g("form"),q(f.$$.fragment),E=x(),q(m.$$.fragment),p=x(),n&&n.c(),v=x(),r=g("button"),A=F("Войти"),D=x(),h=g("span"),O=F(`Ещё нет аккаунта? 
                `),_=g("a"),I=F("Присоединиться"),this.h()},l(s){X("svelte-96kg8h",document.head).forEach(i),u=k(s),a=b(s,"DIV",{class:!0});var j=$(a);t=b(j,"DIV",{class:!0});var z=$(t);e=b(z,"FORM",{class:!0});var c=$(e);J(f.$$.fragment,c),E=k(c),J(m.$$.fragment,c),p=k(c),n&&n.l(c),v=k(c),r=b(c,"BUTTON",{type:!0,class:!0});var C=$(r);A=S(C,"Войти"),C.forEach(i),D=k(c),h=b(c,"SPAN",{class:!0});var N=$(h);O=S(N,`Ещё нет аккаунта? 
                `),_=b(N,"A",{href:!0,class:!0});var L=$(_);I=S(L,"Присоединиться"),L.forEach(i),N.forEach(i),c.forEach(i),z.forEach(i),j.forEach(i),this.h()},h(){document.title="Book и друг | Вход",d(r,"type","submit"),d(r,"class",B="bg-red-400 rounded-xl w-full h-12 font-semibold "+(o[1]&&"mt-20")+" mt-32"),d(_,"href","/register"),d(_,"class","text-blue-800"),d(h,"class","mt-2 ml-3"),d(e,"class","flex flex-col w-[70%]"),d(t,"class","flex md:w-1/2 sm:w-full h-full bg-white items-center justify-center shadow-2xl"),d(a,"class","fixed w-full h-full bg-gray-200")},m(s,w){P(s,u,w),P(s,a,w),l(a,t),l(t,e),V(f,e,null),l(e,E),V(m,e,null),l(e,p),n&&n.m(e,null),l(e,v),l(e,r),l(r,A),l(e,D),l(e,h),l(h,O),l(h,_),l(_,I),o[4](e),y=!0,M||(T=Y(e,"submit",ee(o[3])),M=!0)},p(s,[w]){s[1]?n?n.p(s,w):(n=U(s),n.c(),n.m(e,v)):n&&(n.d(1),n=null),(!y||w&2&&B!==(B="bg-red-400 rounded-xl w-full h-12 font-semibold "+(s[1]&&"mt-20")+" mt-32"))&&d(r,"class",B)},i(s){y||(Z(f.$$.fragment,s),Z(m.$$.fragment,s),y=!0)},o(s){G(f.$$.fragment,s),G(m.$$.fragment,s),y=!1},d(s){s&&i(u),s&&i(a),K(f),K(m),n&&n.d(),o[4](null),M=!1,T()}}}function ne(o,u,a){var t,e=!1,f="";async function E(p){let v=Object.fromEntries(new FormData(t));await fetch("/auth/login",{method:"POST",body:JSON.stringify(v),headers:{"Content-Type":"application/json"}}).then(r=>{if(r.ok&&r.redirected){window.location.assign(r.url);return}a(1,e=!0),a(2,f=r.status===401?"Неверный логин или пароль":"Произошла ошибка, попробуйте позже!")})}function m(p){se[p?"unshift":"push"](()=>{t=p,a(0,t)})}return[t,e,f,E,m]}class le extends H{constructor(u){super(),Q(this,u,ne,ae,W,{})}}export{le as default};

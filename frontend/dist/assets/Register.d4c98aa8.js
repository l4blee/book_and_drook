import{a as i,D as F,b as e,C as b,T as c,d as r,i as a,E as p,G as h,f,I as D,J as B,e as I,H as _,B as q,t as S}from"./index.5eb4a286.js";import{V as W,a as A}from"./VisibilityOff.1fb41c1f.js";const T=S('<form style="width: 90%"></form>'),j=()=>{const[o,x]=i(!1),[w,g]=i(!1),[m,l]=i({status:!1,message:""}),[s,y]=i({login:null,password:null,password_repeat:null});function d(t){y({...s(),[t.target.id]:t.target.value})}function C(t){if(t.preventDefault(),s().password!==s().password_repeat){g(!0);return}const n=s(),E={login:n.login,password:n.password};fetch("/auth/register",{method:"POST",body:JSON.stringify(E),headers:{"Content-Type":"application/json"}}).then(u=>{if(u.status===409){l({status:!0,message:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0441 \u044D\u0442\u0438\u043C \u043B\u043E\u0433\u0438\u043D\u043E\u043C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!"});return}if(u.status!==200){l({status:!0,message:"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."});return}u.redirected&&window.location.assign(u.url)}).catch(u=>{l({status:!0,message:"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})})}return F(()=>{document.title="Book \u0438 \u0434\u0440\u0443\u0433 | \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"}),e(q,{sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},get children(){return e(b,{sx:{display:"flex",flexDirection:"column",width:"400px",justifyContent:"center",alignItems:"center",boxShadow:"#00000029 0 0 25px",padding:"25px",borderRadius:"8px"},get children(){return[e(c,{sx:{fontSize:"22px",width:"100%",textAlign:"center"},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"}),r(()=>r(()=>!!m().status)()&&e(c,{sx:{color:"#d32f2f",textAlign:"center"},get children(){return m().message}})),(()=>{const t=T.cloneNode(!0);return t.addEventListener("submit",C),a(t,e(p,{fullWidth:!0,sx:{mt:"15px"},get children(){return[e(h,{for:"login",required:!0,children:"\u041B\u043E\u0433\u0438\u043D"}),e(f,{id:"login",required:!0,onChange:d})]}}),null),a(t,e(p,{fullWidth:!0,sx:{display:"flex",flexDirection:"row",alignItems:"end",mt:"15px"},get children(){return[e(h,{for:"password",required:!0,children:"\u041F\u0430\u0440\u043E\u043B\u044C"}),e(f,{fullWidth:!0,id:"password",get type(){return o()?"text":"password"},required:!0,onChange:d}),e(D,{onClick:()=>x(!o()),get children(){return r(()=>!!o())()?e(W,{}):e(A,{})},size:"large",sx:{ml:"5px",width:"25px",height:"25px"}})]}}),null),a(t,e(p,{fullWidth:!0,sx:{display:"flex",flexDirection:"column",alignItems:"end",mt:"15px"},get children(){return[e(h,{for:"password_repeat",required:!0,children:"\u041F\u043E\u0432\u0442\u043E\u0440 \u043F\u0430\u0440\u043E\u043B\u044F"}),e(f,{fullWidth:!0,id:"password_repeat",type:"password",required:!0,onChange:n=>{d(n),g(!1)}}),r(()=>r(()=>!!w())()&&e(B,{error:!0,children:"\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442"}))]}}),null),a(t,e(I,{fullWidth:!0,type:"submit",sx:{mt:"10px"},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F"}),null),t})(),e(c,{sx:{mt:"5px"},get children(){return["\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442? ",e(_,{href:"/login",children:"\u0412\u043E\u0439\u0442\u0438"})]}})]}})}})};export{j as default};

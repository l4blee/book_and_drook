import{a,D as C,b as t,C as b,T as o,d as l,i as d,E as g,G as p,f as m,I as D,e as E,H as B,B as I,t as S}from"./index.54b6d1c0.js";import{V as A,a as v}from"./VisibilityOff.f4c6e34b.js";const P=S('<form style="width: 90%"></form>'),j=()=>{const[n,x]=a(!1),[c,u]=a({status:!1,message:""}),[i,w]=a({login:null,password:null});function y(e){e.preventDefault();let f=window.location.search.substring(1).split("=")[1],s;f?s={...i(),origin:f}:s=i(),fetch("/auth/login",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then(async r=>{if(r.status===401){u({status:!0,message:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043B\u043E\u0433\u0438\u043D \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C."});return}if(r.redirected){window.location.replace(r.url);return}if(r.status!==200){u({status:!0,message:"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."});return}}).catch(r=>{u({status:!0,message:"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435."})})}function h(e){w({...i(),[e.target.id]:e.target.value})}return C(()=>{document.title="Book \u0438 \u0434\u0440\u0443\u0433 | \u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F"}),t(I,{sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},get children(){return t(b,{sx:{display:"flex",flexDirection:"column",width:"400px",justifyContent:"center",alignItems:"center",boxShadow:"#00000029 0 0 25px",padding:"25px",borderRadius:"8px"},get children(){return[t(o,{sx:{fontSize:"22px",width:"100%",textAlign:"center"},children:"\u0412\u0445\u043E\u0434"}),l(()=>l(()=>!!c().status)()&&t(o,{sx:{color:"#d32f2f",textAlign:"center"},get children(){return c().message}})),(()=>{const e=P.cloneNode(!0);return e.addEventListener("submit",y),d(e,t(g,{fullWidth:!0,sx:{mt:"15px"},get children(){return[t(p,{for:"login",children:"\u041B\u043E\u0433\u0438\u043D"}),t(m,{id:"login",inputProps:{pattern:"[a-zA-Z0-9-0]{3,20}"},onChange:h,required:!0})]}}),null),d(e,t(g,{fullWidth:!0,sx:{display:"flex",flexDirection:"row",alignItems:"end",mt:"15px"},get children(){return[t(p,{for:"password",children:"\u041F\u0430\u0440\u043E\u043B\u044C"}),t(m,{fullWidth:!0,id:"password",get type(){return n()?"text":"password"},onChange:h,required:!0}),t(D,{onClick:()=>x(!n()),get children(){return l(()=>!!n())()?t(A,{}):t(v,{})},size:"large",sx:{ml:"5px",width:"25px",height:"25px"}})]}}),null),d(e,t(E,{fullWidth:!0,type:"submit",sx:{mt:"10px"},children:"\u0412\u043E\u0439\u0442\u0438"}),null),e})(),t(o,{get children(){return["\u0415\u0449\u0451 \u043D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430? ",t(B,{href:"/register",children:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"})]}})]}})}})};export{j as default};
